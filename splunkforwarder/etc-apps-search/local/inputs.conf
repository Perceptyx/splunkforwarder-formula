{% set monitor = salt['pillar.get']('splunkforwarder:inputs:monitor', {}) %}

### THIS FILE IS AUTOMATICALLY GENERATED by salt

{# On intermediate forwarder machines, listen on port 9998 #}
{% if salt['pillar.get']('splunkforwarder:intermediate', False) %}
[splunktcp-ssl:9998]
compressed = true
connection_host = ip

[SSL]
password = {{ pillar['splunk']['password']['inputs.conf'] }}
rootCA = /opt/splunkforwarder/etc/certs/cacert.pem
serverCert = /opt/splunkforwarder/etc/certs/{{ self_cert }}
{% endif %}

{% for id, settings in monitor.items()|sort -%}
[monitor://{{ settings['monitor'] }}]
{% for n, v in settings.items()|sort -%}{% if n != 'monitor' -%}
{{ n }} = {{ v }}
{% endif %}{%- endfor %}

{% endfor %}
